# Правила для ИИ: UI-компоненты

Инструкции при создании, изменении или добавлении UI-компонентов в `src/components/ui/`.

## Обязательные правила

1. **Импорт `cn`**
   - Всегда: `import { cn } from "@utils"`.

2. **Расположение файлов**
   - Все примитивы и обёртки UI лежат в `src/components/ui/`.
   - Имена файлов примитивов — **PascalCase** (например, `Button.tsx`, `Select.tsx`, `Card.tsx`), чтобы не было конфликтов регистра с импортами.

3. **Экспорты**
   - Публичный API приложения — только через `src/components/ui/index.ts`.
   - Виджеты/страницы импортируют из `@components/ui` (например, `import { Button, Select } from '@components/ui'`).
   - Не добавлять в приложение импорты напрямую из `./Button` или `./Select` — только из `@components/ui`.

4. **Два типа компонентов**
   - **Примитив** — компонент из shadcn (или его копия в репозитории). Может иметь сложный/составной API (например, Select + SelectTrigger + SelectContent).
   - **Обёртка** — компонент в `wrappers.tsx`, который упрощает API приложения или сохраняет обратную совместимость. Именно обёртки экспортируются как `Button`, `Checkbox`, `Select` в `index.ts`.

## При добавлении компонента через shadcn CLI

1. Выполнить: `npx shadcn@canary add <component-name> --overwrite`.
2. В каждом новом/изменённом файле в `src/components/ui/` заменить импорт утилиты на `import { cn } from "@utils"`.
3. Добавить экспорт в `src/components/ui/index.ts`:
   - Если нужен только примитив: `export { ComponentName } from './ComponentName';`
   - Если нужна обёртка: реализовать её в `wrappers.tsx`, затем `export { ComponentName } from './wrappers';` (при необходимости также экспортировать примитив как `ShadcnComponentName` из соответствующего файла).

## При создании обёртки вручную

1. Реализовать компонент в `wrappers.tsx` (импорт примитива из `./PrimitiveName`, использование `cn` из `@utils`).
2. В `index.ts` экспортировать обёртку под основным именем и при необходимости примитив под другим именем.

## При изменении существующего UI-компонента

- Сохранять обратную совместимость API, который уже используется в виджетах/страницах (проверить импорты из `@components/ui` и пропсы).
- Если меняется только внутренняя реализация (например, переход на другой примитив) — обёртка в `wrappers.tsx` должна по-прежнему принимать те же пропсы и экспортироваться из `index.ts` под тем же именем.

## Стилизация

- Использовать токены темы: `bg-primary`, `text-foreground`, `border-input`, `muted`, `accent` и т.д. (см. `src/index.css`).
- Не хардкодить цвета вроде `bg-blue-600` или `text-slate-800` в UI-компонентах — только токены или явно оговорённые исключения (например, игровые цвета из `@theme`).
- Общие правила стилей и форматирования — [styling-rules.md](./styling-rules.md).
